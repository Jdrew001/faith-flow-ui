<ion-content class="register-content">
  <div class="register-container">
    <!-- Header Section -->
    <div class="header-section">
      <ion-button fill="clear" class="back-button" (click)="navigateToLogin()">
        <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
      </ion-button>
      
      <div class="logo-container">
        <ion-icon name="heart" class="app-logo"></ion-icon>
        <h1>Join Faith Flow</h1>
      </div>
      <p class="welcome-text">Create your account and connect with your spiritual community</p>
    </div>

    <!-- Registration Form -->
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <ion-card class="form-card">
        <ion-card-content>
          <!-- Name Fields -->
          <div class="name-row">
            <ion-item fill="outline" class="form-item name-item">
              <ion-label position="floating">First Name</ion-label>
              <ion-input 
                type="text" 
                formControlName="firstName"
                [class.ion-invalid]="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched"
                placeholder="John">
              </ion-input>
            </ion-item>
            
            <ion-item fill="outline" class="form-item name-item">
              <ion-label position="floating">Last Name</ion-label>
              <ion-input 
                type="text" 
                formControlName="lastName"
                [class.ion-invalid]="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched"
                placeholder="Doe">
              </ion-input>
            </ion-item>
          </div>
          
          <div class="error-message" *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
            {{ getErrorMessage('firstName') }}
          </div>
          <div class="error-message" *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
            {{ getErrorMessage('lastName') }}
          </div>

          <!-- Email Field -->
          <ion-item fill="outline" class="form-item">
            <ion-label position="floating">Email Address</ion-label>
            <ion-input 
              type="email" 
              formControlName="email"
              [class.ion-invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
              placeholder="john@example.com">
            </ion-input>
            <ion-icon name="mail-outline" slot="start"></ion-icon>
          </ion-item>
          
          <div class="error-message" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
            {{ getErrorMessage('email') }}
          </div>

          <!-- Church Name (Optional) -->
          <ion-item fill="outline" class="form-item">
            <ion-label position="floating">Church Name (Optional)</ion-label>
            <ion-input 
              type="text" 
              formControlName="churchName"
              placeholder="Grace Community Church">
            </ion-input>
            <ion-icon name="business-outline" slot="start"></ion-icon>
          </ion-item>

          <!-- Password Fields -->
          <ion-item fill="outline" class="form-item">
            <ion-label position="floating">Password</ion-label>
            <ion-input 
              [type]="showPassword ? 'text' : 'password'" 
              formControlName="password"
              [class.ion-invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
              placeholder="Enter password">
            </ion-input>
            <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
            <ion-button 
              fill="clear" 
              slot="end" 
              (click)="togglePasswordVisibility()"
              type="button">
              <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
            </ion-button>
          </ion-item>
          
          <div class="error-message" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
            {{ getErrorMessage('password') }}
          </div>

          <ion-item fill="outline" class="form-item">
            <ion-label position="floating">Confirm Password</ion-label>
            <ion-input 
              [type]="showConfirmPassword ? 'text' : 'password'" 
              formControlName="confirmPassword"
              [class.ion-invalid]="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched"
              placeholder="Confirm password">
            </ion-input>
            <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
            <ion-button 
              fill="clear" 
              slot="end" 
              (click)="toggleConfirmPasswordVisibility()"
              type="button">
              <ion-icon [name]="showConfirmPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
            </ion-button>
          </ion-item>
          
          <div class="error-message" *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched">
            {{ getErrorMessage('confirmPassword') }}
          </div>

          <!-- Terms and Conditions -->
          <div class="terms-section">
            <ion-checkbox formControlName="agreeToTerms"></ion-checkbox>
            <ion-label class="terms-label">
              I agree to the 
              <a href="#" class="terms-link">Terms of Service</a> 
              and 
              <a href="#" class="terms-link">Privacy Policy</a>
            </ion-label>
          </div>
          
          <div class="error-message" *ngIf="registerForm.get('agreeToTerms')?.invalid && registerForm.get('agreeToTerms')?.touched">
            {{ getErrorMessage('agreeToTerms') }}
          </div>

          <!-- Register Button -->
          <ion-button 
            expand="block" 
            type="submit" 
            class="register-btn"
            [disabled]="isLoading">
            <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
            <span *ngIf="!isLoading">Create Account</span>
          </ion-button>
        </ion-card-content>
      </ion-card>
    </form>

    <!-- Login Link -->
    <div class="login-section">
      <p>Already have an account?</p>
      <ion-button 
        fill="clear" 
        (click)="navigateToLogin()"
        class="login-link-btn">
        Sign In
      </ion-button>
    </div>
  </div>
</ion-content>
