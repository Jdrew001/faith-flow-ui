<ion-card class="event-card" [class.grid-mode]="viewMode === 'grid'" (click)="onEventClick()">
  <!-- Event Image -->
  <div class="event-image-container">
    <img [src]="event.imageUrl || 'assets/images/default-event.jpg'" [alt]="event.title" />
    <div class="event-status-badge">
      <ion-badge [color]="getStatusColor(event.status)">{{ event.status | titlecase }}</ion-badge>
    </div>
    <div class="event-type-icon">
      <ion-icon [name]="getEventIcon(event.type)" [color]="getStatusColor(event.status)"></ion-icon>
    </div>
  </div>

  <ion-card-content>
    <!-- Event Header -->
    <div class="event-header">
      <h2 class="event-title">{{ event.title }}</h2>
      <ion-button 
        fill="clear" 
        size="small" 
        (click)="onOptionsClick($event)">
        <ion-icon name="ellipsis-vertical"></ion-icon>
      </ion-button>
    </div>

    <!-- Event Description (List mode only) -->
    <p class="event-description" *ngIf="viewMode === 'list' && event.description">
      {{ event.description }}
    </p>

    <!-- Event Details -->
    <div class="event-details">
      <!-- Date & Time -->
      <div class="detail-item">
        <ion-icon name="calendar" color="primary"></ion-icon>
        <span>{{ formatDate(event.date) }} at {{ formatTime(event.time) }}</span>
      </div>

      <!-- Location -->
      <div class="detail-item">
        <ion-icon name="location" color="primary"></ion-icon>
        <span>{{ event.location }}</span>
      </div>

      <!-- Recurring Event Indicator -->
      <div class="detail-item" *ngIf="event.isRecurring && viewMode === 'list'">
        <ion-icon name="repeat" color="secondary"></ion-icon>
        <span>{{ event.recurrencePattern | titlecase }} event</span>
      </div>
    </div>

    <!-- Attendance Progress (List mode only) -->
    <div class="attendance-section" *ngIf="viewMode === 'list' && event.maxAttendees">
      <div class="attendance-header">
        <span class="attendance-label">Attendance</span>
        <span class="attendance-count">{{ event.attendeeCount || 0 }}/{{ event.maxAttendees }}</span>
      </div>
      <ion-progress-bar 
        [value]="getAttendancePercentage() / 100"
        [color]="getAttendancePercentage() > 80 ? 'warning' : 'primary'">
      </ion-progress-bar>
      <span class="attendance-percentage">{{ getAttendancePercentage() }}% full</span>
    </div>

    <!-- Event Tags (List mode only) -->
    <div class="event-tags" *ngIf="viewMode === 'list' && event.tags && event.tags.length > 0">
      <ion-chip *ngFor="let tag of event.tags" color="light" outline="true">
        <ion-label>{{ tag }}</ion-label>
      </ion-chip>
    </div>

    <!-- Action Button (Grid mode only) -->
    <div class="card-actions" *ngIf="viewMode === 'grid'">
      <ion-button 
        fill="outline" 
        size="small" 
        expand="block"
        (click)="onRegisterClick($event)"
        *ngIf="event.status === 'upcoming'">
        <ion-icon name="person-add" slot="start"></ion-icon>
        Register
      </ion-button>
      <ion-button 
        fill="outline" 
        size="small" 
        expand="block"
        color="medium"
        *ngIf="event.status !== 'upcoming'">
        <ion-icon name="checkmark" slot="start"></ion-icon>
        {{ event.status | titlecase }}
      </ion-button>
    </div>
  </ion-card-content>
</ion-card>
